import React, { useState, useContext } from 'react';
import { SearchInput } from 'evergreen-ui';

import AlertContext from 'context/Alert/AlertContext';
import GithubContext from 'context/Github/GithubContext';

import './search.scss';

function Search() {

    const [value, setValue] = useState('');
    const alert = useContext(AlertContext);
    const github = useContext(GithubContext);

    const handleSubmit = (event) => {
        event.preventDefault();

        github.clearUsers();

        if (value.trim()) {
            alert.hide();
            github.search(value.trim());
        } else {
            alert.show('Enter user details.');
        }
    };

    return (
        <form onSubmit={handleSubmit}>
            <SearchInput
                placeholder="Enter user nickname"
                height={40}
                width="100%"
                value={value}
                onChange={(event) => setValue(event.target.value)}
            />
        </form>
    );
}

export default Search;